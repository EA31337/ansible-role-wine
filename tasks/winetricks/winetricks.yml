---
- name: Ensures winetricks and dependencies are present
  become: "{{ ansible_user_id != 'root' }}"
  block:

    - name: Ensures winetricks is present ({{ ansible_os_family }})
      ansible.builtin.include_tasks:
        file: "winetricks-{{ ansible_os_family }}.yml"

    - name: Install dependencies required by winetricks ({{ ansible_os_family }})
      ansible.builtin.include_tasks:
        file: install-deps-{{ ansible_os_family }}.yml
      when:
        - wine_install_winetricks_dependencies | length > 0
